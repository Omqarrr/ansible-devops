---
apiVersion: integreatly.org/v1alpha1
kind: Grafana
metadata:
  name: mas-grafana
  namespace: "{{ grafana_namespace }}"
spec:
  config:
    auth:
      disable_signout_menu: true
      disable_login_form: false
    auth.anonymous:
      enabled: true
    log:
      level: warn
      mode: console
    security:
      admin_password: "{{ grafana_password }}"
      admin_user: "{{ grafana_user }}"
  ingress:
    enabled: true
  dataStorage:
    accessModes:
      - ReadWriteOnce
    size: "{{ grafana_storage_size }}"
    class: "{{ grafana_storage_class }}"
  dashboardLabelSelector:
    - matchExpressions:
        - key: app
          operator: In
          values:
            - grafana
